<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Personal Site</title>
    <base href="/" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="assets/favicon/favicon.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&family=Quicksand:wght@300..700&family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
    <meta name="theme-color" content="#222E41">
    <script src="https://cdn.jsdelivr.net/npm/@phosphor-icons/web"></script>

</head>

<body class="cdk-global-scrollblock">
    <canvas id="starsCanvas"></canvas>
    <!--background stars effect-->
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const canvas = document.getElementById("starsCanvas");
            const ctx = canvas.getContext("2d");

            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }

            resizeCanvas();
            window.addEventListener("resize", resizeCanvas);

            const stars = [];
            const numStars = 150;

            for (let i = 0; i < numStars; i++) {
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    radius: Math.random() * 2,
                    speed: Math.random() * 0.3 + 0.1,
                });
            }

            let moonRadius = 40; // Reduced moon size
            let moonAngle = 10;
            let t = -50;
            let moonSpeed = 0.01; // Slightly slower movement/ Slower movement

            function getMoonPosition(t) {
                let startX = -100;
                let endX = canvas.width + 100;
                let apexY = canvas.height * 0.3;
                let groundY = canvas.height * 0.85;

                let h = (startX + endX) / 2;
                let k = apexY;
                let a = (groundY - k) / ((startX - h) ** 2);

                let normalizedT = (Math.sin((t / 100) * Math.PI - Math.PI / 2) + 1) / 2;
                let moonX = startX + (endX - startX) * normalizedT;
                let moonY = a * (moonX - h) ** 2 + k;

                return { x: moonX, y: moonY };
            }

            function drawGradientBackground() {
                    const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                    gradient.addColorStop(0, "#1a0026"); // Deep midnight purple
                    gradient.addColorStop(0.5, "#0d001a"); // Dark purple
                    gradient.addColorStop(1, "#000011"); // Almost black

                    ctx.fillStyle = gradient;
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                }

                function drawMoon(moonX, moonY) {
                ctx.save();
                ctx.translate(moonX, moonY);
                ctx.rotate(moonAngle * (Math.PI / 180));

                // Softer blood moon glow
                const glowGradient = ctx.createRadialGradient(0, 0, moonRadius * 0.6, 0, 0, moonRadius * 1.5);
                glowGradient.addColorStop(0, "#b33939"); // Softer dark red
                glowGradient.addColorStop(1, "rgba(179, 57, 57, 0)");

                ctx.fillStyle = glowGradient;
                ctx.beginPath();
                ctx.arc(0, 0, moonRadius * 1.5, 0, Math.PI * 2);
                ctx.fill();

                // Draw moon
                ctx.fillStyle = "#992828"; // Deep reddish-brown
                ctx.beginPath();
                ctx.arc(0, 0, moonRadius, 0, Math.PI * 2);
                ctx.fill();

                // Dark craters
                ctx.fillStyle = "#6d1e1e";
                const craters = [
                    { x: -10, y: -5, r: 6 },
                    { x: 10, y: 4, r: 5 },
                    { x: -5, y: 12, r: 4 },
                ];
                craters.forEach(crater => {
                    ctx.beginPath();
                    ctx.arc(crater.x, crater.y, crater.r, 0, Math.PI * 2);
                    ctx.fill();
                });

                ctx.restore();
            }


            function animateStars() {
                drawGradientBackground();

                let { x: moonX, y: moonY } = getMoonPosition(t);
                drawMoon(moonX, moonY);

                moonAngle += 0.03; // Slower rotation
                t += moonSpeed;
                if (t > 100) t = -50;

                ctx.fillStyle = "white";
                for (const star of stars) {
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
                    ctx.fill();

                    star.y += star.speed;
                    if (star.y > canvas.height) {
                        star.y = 0;
                        star.x = Math.random() * canvas.width;
                    }
                }

                requestAnimationFrame(animateStars);
            }

            animateStars();
        })

    </script>
    <app-root></app-root>
</body>
</html>